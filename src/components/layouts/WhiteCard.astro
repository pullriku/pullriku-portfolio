---
import { Image } from "astro:assets";

type Props = {
	title?: string;
	image?: {
		path: string;
		alt: string;
	};
};

const { title, image } = Astro.props as Props;

const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/assets/works/*.{png,jpg,jpeg,svg,gif}",
);
if (image && !images[image.path])
	throw new Error(
		`"${image.path}" は存在しません。"src/assets/*.{jpeg,jpg,png,gif}" に配置してください。`,
	);
---

<article
	class="flex flex-col sm:flex-row gap-2 rounded-2xl bg-white/80 p-4 shadow-md ring-1 ring-black/5"
>
	<div>
		{
			title && (
				<h3 class="text-2xl pb-2 font-semibold text-slate-800">{title}</h3>
			)
		}
		<slot />
	</div>

	{
		image && (
			<Image class={"w-70 h-fit  mx-auto object-contain rounded-2xl"} src={images[image.path]()} alt={image.alt} />
		)
	}
</article>
